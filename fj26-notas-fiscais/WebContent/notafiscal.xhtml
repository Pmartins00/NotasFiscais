<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/WEB-INF/templates/_template2.xhtml">
	<ui:define name="titulo">
	    Manter Vendas
	</ui:define>
	
	<ui:define name="corpo">
				
			<h:form id="form2">
			<!-- Dados do Item -->
			
				
				
			
			
				<fieldset class="f">
				<legend class="t">Dados da Nota</legend>
				
				<h:panelGrid columns="2">
						<p:outputLabel value="CNPJ Cliente:" for="cnpj"/>
						<p:inputMask id="cnpj" value="#{notaFiscalBean.notaFiscal.cnpj}" mask="99.999.999/999-99" />
						
						<p:outputLabel value="Data:" for="data"/>
						<p:calendar pattern="dd/MM/yyyy" id="data" value="#{notaFiscalBean.notaFiscal.data}"/>
				</h:panelGrid>		
				</fieldset>
						
				<fieldset class="f">
					<legend class="t">Dados do Item</legend>
					<h:panelGrid columns="2">
					<p:outputLabel for="produto" value="Produto:"/>
					<p:selectOneMenu id="produto" value="#{notaFiscalBean.idProduto}">
						<f:selectItem itemLabel="Selecione Algum" itemValue="#{null}"/>
						<f:selectItems value="#{produtoBean.produtos}" var="produto" itemValue="#{produto.id}" itemLabel="#{produto.nome}"/>
					</p:selectOneMenu>
					
					<p:outputLabel for="quantidade" value="Quantidade:"/>
					<p:inputText id="quantidade" value="#{notaFiscalBean.item.quantidade}"/>
					
					<h:commandButton  action="#{notaFiscalBean.guardaItem}" value="Guarda Item">
						<f:ajax execute=":form2" render=":form2"/>
					</h:commandButton>
					</h:panelGrid>
				</fieldset>
						
		
				
				
			<h3 class="t">Itens da Nota</h3>
		
			<!-- Lista -->
				<p:dataTable value="#{notaFiscalBean.lista}" var="item" styleClass="prod" rowClasses="par,impar">
					
					<p:column headerText="Produto">
						#{item.produto.nome}
					</p:column>
					
					<p:column headerText="PreÃ§o">
						<h:outputText value="#{item.valorUnitario}">
							<f:convertNumber pattern="RS #0.00"/>
						</h:outputText>
					</p:column>
					
					<p:column headerText="Quantidade">
						#{item.quantidade}
					</p:column>
					
					<p:column headerText="Valor Total">
						<h:outputText value="#{item.total()}">
							<f:convertNumber pattern="RS #0.00"/>
						</h:outputText>
					</p:column>
					
				</p:dataTable>
			
			<h:commandButton action="#{notaFiscalBean.adiciona}" value="Salvar Venda">
					
			</h:commandButton>
			
			</h:form>
			
			
			
		
	</ui:define>
	
</ui:composition>
</html>